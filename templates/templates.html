
<xmp id="home">
	<h1>tumblr gallery</h1>
	<p>
		this is an example of using a template system to make a frontend for the popular blogging page, <a href="http://tumblr.com/" target="_blank">tumblr</a>.
	</p>
	<p>
		some of the javascript is kinda funky, so I'd appreciate your input, instead of criticism, know what I mean?
	</p>
	<p>
		-kenny (<a href="mailto:kenny@unhosted.org">kenny@unhosted.org</a>)
	</p>
	<p><?=telescopic("[hi|hello, how are you.] [my name is|they call me here on earth] [kenny|[k-dawg|kenneth edward bentley, by birth]], and I am a [programmer|hacker; convinced I will blow people's minds with my [programs!|..well ok, they're more like masterpieces, you're right]]")?></p>
</xmp>

<xmp id="sidebar">
	<h1>random tumblogs</h1>
	<div>
		<?=SKIN.global('tumblr.user', cE('input', {value: TUMBLR.user,
		onclick: function(e) {
			this.select();
		},
		onkeyup: function(e) {
			var k = e.keyCode;
			if(k === 13) {
				document.location.hash = '/tumblr/'+TUMBLR.type+'/'+this.value;
			}
		}}))?>
	</div>
	<div><?=SKIN.link('*/*/hamsternipples', 'hamsternipples')?></div>
	<div><?=SKIN.link('*/*/thenastygal', 'thenastygal')?></div>
	<div><?=SKIN.link('*/*/her-imperfections', 'her-imperfections')?></div>
	<div><?=SKIN.link('*/*/loveandaffectionnn', 'loveandaffectionnn')?></div>
	<div><?=SKIN.link('*/*/middlefingersandshortskirts', 'middlefingersandshortskirts')?></div>
	<div><?=SKIN.link('*/*/threewordphrase', 'threewordphrase')?></div>
	<div><?=SKIN.link('*/*/thelackoforiginality', 'thelackoforiginality')?></div>
	<div><?=SKIN.link('*/*/cheaper-than-therapy', 'cheaper-than-therapy')?></div>
	<div><?=SKIN.link('*/*/gingerphobia', 'gingerphobia')?></div>
	<div><?=SKIN.link('*/*/myreto', 'myreto')?></div>
</xmp>


<xmp id="tumblr" load="TUMBLR.load">
	<div>
		shit can go here...
	</div>
	<div>
		<?=SKIN.gallery({
			template: 'tumblr_gallery',
			page: 'tumblr_entry',
			pager: 'pager',
			page_offset: 0,
			page_size: 20,
			controller: TUMBLR.gallery_control,
			fetch: TUMBLR.fetch,
			render: TUMBLR.render
		})?>
	</div>
</xmp>

<xmp id="tumblr_gallery">
	<div>
		<?=SKIN.global('tumblr.title', cE('h1', {c:'title'}))?>
		<?=SKIN.global('tumblr.about', cE('div', {c:'about', style:'font-size: 200%; padding: 20px'}))?>
	</div>
	<div>
		<ul class="menu">
			<li><?=SKIN.link('*/all/*', 'all')?> (<?=SKIN.global('tumblr.all.total',0,0)?>)</li>
			<li><?=SKIN.link('*/text/*', 'articles')?> (<?=SKIN.global('tumblr.regular.total',0,0)?>)</li>
			<li><?=SKIN.link('*/photo/*', 'photos')?> (<?=SKIN.global('tumblr.photo.total',0,0)?>)</li>
			<li><?=SKIN.link('*/link/*', 'links')?> (<?=SKIN.global('tumblr.link.total',0,0)?>)</li>
			<li><?=SKIN.link('*/chat/*', 'chats')?> (<?=SKIN.global('tumblr.conversation.total',0,0)?>)</li>
			<li><?=SKIN.link('*/audio/*', 'audio')?> (<?=SKIN.global('tumblr.audio.total',0,0)?>)</li>
			<li><?=SKIN.link('*/video/*', 'videos')?> (<?=SKIN.global('tumblr.video.total',0,0)?>)</li>
		</ul>
	</div>
	<div class="controls">
		<button onclick="<?=d.pager_start()?>"><?="|<<"?></button>
		<button onclick="<?=d.pager_back()?>"><?="<<"?></button>
		<?=SKIN.global('tumblr.cur')?> of <?=SKIN.global('tumblr.total')?>
		<button onclick="<?=d.pager_forward()?>"><?=">>"?></button>
		<button onclick="<?=d.pager_end()?>"><?=">>|"?></button>
	</div>
	<?=SKIN.global('tumblr.posts', cE('div', {c: 'posts'}))?>
</xmp>

<xmp id="tumblr_entry">
	<div class="post post_<?=d.type?>">
		<?
		if(d.type === "regular") {
			?>
			<h1><?=d['regular-title']?></h1>
			<div html="<?=d['regular-body']?>"></div>
			<?
		} else if(d.type === "link") {
			?>
			<a href="<?=d['link-url']?>" target="_blank"><?=d['link-text']?></a>
			<?
			if(d['link-decription']) {
				?><div html="<?=d['link-decription']?>"></div><?
			}
		} else if(d.type === "quote") {
			?>
			<h1 html="<?=d['quote-text']?>"></h1>
			<div>
				<?
				if(d['quote-source']) {
					?><?=d['quote-source']?><?
				} else {
					?><em>-unknown</em><?
				}
				?>
			</div>
			<?
		} else if(d.type === "photo") {
			?>
			<img src="<?=d['photo-url-500']?>" />
			<div html="<?=d['photo-caption']?>"></div>
			<?
		} else if(d.type === "conversation") {
			?>
			<h1><?=d['conversation-title']?></h1>
			<div html="<?=d['conversation-text']?>"></div>
			<?
		} else if(d.type === "answer") {
			?>
			<h1><?=d['question']?></h1>
			<h2 html="<?=d['answer']?>"></h2>
			<?
		} else if(d.type === "audio") {
			?>
			<h1><?=d['audio-caption']?></h1>
			<div html="<?=d['audio-player']?>"></div>
			<?
		} else if(d.type === "video") {
			?>
			<h1 html="<?=d['video-caption']?>"></h1>
			<div html="<?=d['video-player']?>"></div>
			<?
		} else {
			console.log("unknown post type:", d);
		}
		?>
	</div>
</xmp>
